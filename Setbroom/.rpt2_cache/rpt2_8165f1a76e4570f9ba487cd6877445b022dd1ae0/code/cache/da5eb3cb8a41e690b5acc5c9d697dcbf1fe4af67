{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nimport ADManager from \"../../TJ/Admanager\";\r\nexport default class UIVictory extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.BtnGet = this.self['BtnGet'];\r\n        this.AccordingLv = this.self['AccordingLv'];\r\n        this.GoldRes = this.self['GoldRes'];\r\n        this.GetGold = this.self['GetGold'];\r\n        this.BtnSet = this.self['BtnSet'];\r\n        this.BtnSelect = this.self['BtnSelect'];\r\n        this.Logo = this.self['Logo'];\r\n        this.SetBtn = this.self['SetBtn'];\r\n        this.getGoldDisplay();\r\n        this.accordingLv();\r\n        this.goldRes();\r\n        console.log('当前关卡是：' + lwg.Global._gameLevel);\r\n        if (lwg.Global.pingceV) {\r\n            let select = this.BtnSelect.getChildByName('select');\r\n            select.visible = false;\r\n            this.BtnSelect.visible = false;\r\n        }\r\n        this.adaptive();\r\n        this.openAni();\r\n        lwg.PalyAudio.playSound(lwg.Enum.voiceUrl.wancheng, 1);\r\n        this.self['BtnNo'].visible = false;\r\n        setTimeout(() => {\r\n            this.self['BtnNo'].visible = true;\r\n        }, lwg.Global._btnDelayed);\r\n    }\r\n    adaptive() {\r\n        this.GetGold.y = Laya.stage.height * 0.273;\r\n        this.Logo.y = Laya.stage.height * 0.192;\r\n        this.AccordingLv.y = Laya.stage.height * 0.110;\r\n        this.SetBtn.y = Laya.stage.height * 0.762;\r\n        this.self['P202'].y = Laya.stage.height * 0.494;\r\n        this.BtnSet.y = 150;\r\n    }\r\n    openAni() {\r\n        let delayed = 150;\r\n        let time = 200;\r\n        let y1 = this.self['background'].y;\r\n        lwg.Animation.move_Deform_Y(this.self['background'], -300, -15, y1, -0.1, 0.2, time, delayed, f => {\r\n        });\r\n        let y2 = this.AccordingLv.y;\r\n        lwg.Animation.move_Deform_Y(this.AccordingLv, -200, -15, y2, -0.15, 0.2, time, delayed * 2, f => { });\r\n        let x1 = this.Logo.x;\r\n        lwg.Animation.move_Deform_X(this.Logo, x1, -30, x1, -0.1, 0.2, time, delayed * 1, f => { });\r\n        let x4 = this.GetGold.x;\r\n        lwg.Animation.move_Deform_X(this.GetGold, x4, 30, x4, -0.1, 0.2, time, delayed * 2, f => { });\r\n        let x2 = this.SetBtn.x;\r\n        lwg.Animation.move_Deform_X(this.SetBtn, x2, 30, x2, -0.1, 0.2, time, delayed * 3, f => {\r\n            lwg.Animation.swell_shrink(this.Logo, 1, 1.1, time / 2, delayed * 1, f => {\r\n                this.btnClickOn();\r\n            });\r\n            lwg.Animation.swell_shrink(this.GetGold, 1, 1.1, time / 2, delayed * 2, f => {\r\n            });\r\n            lwg.Animation.swell_shrink(this.SetBtn, 1, 1.1, time / 2, delayed * 3, f => {\r\n            });\r\n        });\r\n        let x5 = this.GoldRes.x;\r\n        lwg.Animation.move_Deform_X(this.GoldRes, 920, -30, x5, -0.1, 0.2, time, delayed * 3, f => { });\r\n        let x6 = this.BtnSet.x;\r\n        lwg.Animation.move_Deform_X(this.BtnSet, -200, 0, x6, -0.1, 0.2, time, delayed * 3, f => { });\r\n    }\r\n    openAniFunc() {\r\n        this.btnClickOn();\r\n    }\r\n    getGoldDisplay() {\r\n        let getLebel = this.GetGold.getChildByName('Num');\r\n        let level = lwg.Global._gameLevel;\r\n        if (lwg.Global._taskGoldBoo) {\r\n            getLebel.text = lwg.Global._taskGoldNum.toString();\r\n            console.log('金币关卡，共吃到金币为：' + getLebel.text);\r\n        }\r\n        else {\r\n            getLebel.text = (25).toString();\r\n            console.log('普通关卡奖励金币为：' + getLebel.text);\r\n        }\r\n    }\r\n    goldRes() {\r\n        let goldLebel = this.GoldRes.getChildByName('Num');\r\n        goldLebel.text = (lwg.Global._goldNum).toString();\r\n    }\r\n    accordingLv() {\r\n        let currentLv = this.AccordingLv.getChildByName('CurrentLv');\r\n        currentLv.text = lwg.Global._gameLevel.toString();\r\n        lwg.Global._gameLevel++;\r\n        let nextLv = this.AccordingLv.getChildByName('NextLv');\r\n        nextLv.text = lwg.Global._gameLevel.toString();\r\n    }\r\n    btnClickOn() {\r\n        lwg.Click.on('largen', null, this.self['BtnAdv'], this, null, null, this.btnAdvUp, null);\r\n        lwg.Click.on('noEffect', null, this.self['BtnNo'], this, this.btnNoUp, null, null, null);\r\n        lwg.Click.on('largen', null, this.BtnSet, this, null, null, this.btnSetUP, null);\r\n    }\r\n    btnNoUp(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        let getLebel = this.GetGold.getChildByName('Num');\r\n        lwg.Global._goldNum += Number(getLebel.text);\r\n        this.openPifuXianding();\r\n        this.self.close();\r\n        lwg.LocalStorage.addData();\r\n    }\r\n    btnAdvUp(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        ADManager.ShowReward(() => {\r\n            this.advFunc();\r\n        });\r\n    }\r\n    advFunc() {\r\n        let getLebel = this.GetGold.getChildByName('Num');\r\n        lwg.Global._goldNum += Number(getLebel.text) * 10;\r\n        lwg.Global.UIMain['UIMain'].currentPifuSet();\r\n        lwg.LocalStorage.addData();\r\n        if (lwg.Global.pingceV) {\r\n            return;\r\n        }\r\n        this.openPifuXianding();\r\n    }\r\n    openPifuXianding() {\r\n        if ((lwg.Global._gameLevel - 1) % lwg.Global._checkpointInterval === 1 && lwg.Global._watchAdsNum < 3) {\r\n            lwg.Global._openInterface('UIXDpifu', null, null);\r\n        }\r\n        else {\r\n            lwg.Global._openInterface('UIStart', this.self, f => { });\r\n        }\r\n    }\r\n    btnSetUP(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        lwg.Global._openInterface('UISet', null, null);\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/SetBroom/obj/Setbroom/src/script/Lwg_Template/lwg.ts",
    "D:/Game/project/SetBroom/obj/Setbroom/src/TJ/Admanager.ts"
  ]
}
