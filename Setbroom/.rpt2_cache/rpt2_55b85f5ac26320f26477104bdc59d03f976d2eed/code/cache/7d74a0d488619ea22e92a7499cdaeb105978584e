{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nexport default class UIMain_Besom extends Laya.Script3D {\r\n    constructor() {\r\n        super();\r\n        this.FPos = new Laya.Vector3();\r\n        this.compoundShape = new Laya.CompoundColliderShape();\r\n    }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['UIMain_Besom'] = this;\r\n        this.selfRig = this.self.getComponent(Laya.Rigidbody3D);\r\n        this.selfScene = this.self.scene;\r\n        let head = this.self.getChildAt(0);\r\n        let headCollider = head.getComponent(Laya.PhysicsCollider);\r\n        let headShape = headCollider.colliderShape.clone();\r\n        headCollider.destroy();\r\n        let stick = this.self.getChildAt(1);\r\n        let stickCollider = stick.getComponent(Laya.PhysicsCollider);\r\n        let stickShape = stickCollider.colliderShape.clone();\r\n        stickCollider.destroy();\r\n        let pedestal = this.self.getChildAt(2);\r\n        let pedestalCollider = pedestal.getComponent(Laya.PhysicsCollider);\r\n        let pedestalShape = pedestalCollider.colliderShape.clone();\r\n        pedestalCollider.destroy();\r\n        this.compoundShape.addChildShape(headShape);\r\n        this.compoundShape.addChildShape(stickShape);\r\n        this.compoundShape.addChildShape(pedestalShape);\r\n        this.selfRig.colliderShape = this.compoundShape;\r\n        this.rigParameters();\r\n        this.transform = this.self.transform;\r\n        this.firstPosX = this.transform.localPositionX;\r\n        this.firstPosY = this.transform.localPositionY;\r\n        this.firstPosZ = this.transform.localPositionZ;\r\n        this.firstRotZ = this.transform.localRotationEulerZ;\r\n        this.firstRotY = this.transform.localRotationEulerY;\r\n        this.firstRotX = this.transform.localRotationEulerX;\r\n        this.transform.localRotationEulerZ = 0;\r\n        this.FPos = this.self.transform.localPosition;\r\n    }\r\n    initProperty() {\r\n        this.self.transform.localPositionX = this.firstPosX;\r\n        this.self.transform.localPositionY = this.firstPosY;\r\n        this.self.transform.localPositionZ = this.firstPosZ;\r\n        let e = this.self.transform.localRotationEuler;\r\n        e.x = this.firstRotX;\r\n        e.y = this.firstRotY;\r\n        e.z = this.firstRotZ;\r\n        this.self.transform.localRotationEuler = e;\r\n        this.selfRig.clearForces();\r\n        console.log('扫把的属性初始化');\r\n    }\r\n    rigParameters() {\r\n        this.selfRig.detectCollisions = true;\r\n        this.selfRig.friction = 100;\r\n        this.selfRig.restitution = 0.1;\r\n        this.selfRig.gravity = (new Laya.Vector3(0, -2, 0));\r\n        this.selfRig.angularVelocity = new Laya.Vector3(0, 0, 0);\r\n        this.selfRig.mass = 10;\r\n    }\r\n    personLookAtBesom() {\r\n        let personHead = this.selfScene['UIMain'].person['UIMain_Person'].head;\r\n        let selfVec = this.self.transform.localPosition;\r\n        personHead.transform.lookAt(selfVec, new Laya.Vector3(0, 1, 0));\r\n        let e = personHead.transform.localRotationEuler.clone();\r\n        e.x = e.x / 2;\r\n        e.y = e.y / 2;\r\n        e.z = e.z / 2;\r\n        personHead.transform.localRotationEuler = e;\r\n    }\r\n    onUpdate() {\r\n        let rote = this.transform.localRotationEuler;\r\n        rote.x = 0;\r\n        rote.y = 0;\r\n        this.transform.localRotationEuler = rote;\r\n        this.transform.localPositionZ = this.firstPosZ;\r\n        if (lwg.Global._gameStart && lwg.Global._timeLineSwitch) {\r\n            this.selfRig.gravity = (new Laya.Vector3(0, -3, 0));\r\n        }\r\n        else {\r\n            this.selfRig.gravity = (new Laya.Vector3(0, 0, 0));\r\n            this.selfRig.angularVelocity = (new Laya.Vector3(0, 0, 0));\r\n            this.selfRig.linearVelocity = (new Laya.Vector3(0, 0, 0));\r\n        }\r\n        this.personLookAtBesom();\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/SetBroom/Setbroom/src/script/Lwg_Template/lwg.ts"
  ]
}
