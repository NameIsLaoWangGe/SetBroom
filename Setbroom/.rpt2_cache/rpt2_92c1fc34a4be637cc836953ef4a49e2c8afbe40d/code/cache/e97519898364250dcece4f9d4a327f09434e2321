{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nexport default class UIStart extends Laya.Script {\r\n    constructor() { super(); }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.BtnStart = this.self['BtnStart'];\r\n        this.BtnPifu = this.self['BtnPifu'];\r\n        this.BtnXianding = this.self['BtnXianding'];\r\n        this.BtnSet = this.self['BtnSet'];\r\n        this.AccordingLv = this.self['AccordingLv'];\r\n        this.GoldRes = this.self['GoldRes'];\r\n        this.self['UIStart'] = this;\r\n        this.goldRes();\r\n        this.levelsDisplayFormat();\r\n        this.pifuXianding();\r\n        lwg.Global._levelInformation();\r\n        if (lwg.Global._voiceSwitch) {\r\n            lwg.PalyAudio.playMusic(lwg.Enum.voiceUrl.bgm, 0, 1000);\r\n        }\r\n        this.noHaveSubChaoren();\r\n        this.adaptive();\r\n        this.openAni();\r\n    }\r\n    adaptive() {\r\n        this.BtnStart.y = Laya.stage.height * 0.788;\r\n    }\r\n    openAni() {\r\n        let delayed = 100;\r\n        let time = 250;\r\n        let x1 = this.BtnSet.x;\r\n        lwg.Animation.move_Deform_X(this.BtnSet, -200, 30, x1, -0.1, 0.2, time, delayed * 3, f => { });\r\n        let x2 = this.GoldRes.x;\r\n        lwg.Animation.move_Deform_X(this.GoldRes, 920, 30, x2, 0.2, -0.15, time, delayed * 3, f => { });\r\n        let x3 = this.BtnXianding.x;\r\n        lwg.Animation.move_Deform_X(this.BtnXianding, -200, 30, x3, -0.15, 0.2, time, delayed * 3, f => { });\r\n        let x4 = this.BtnPifu.x;\r\n        lwg.Animation.move_Deform_X(this.BtnPifu, 920, 30, x4, 0.2, -0.15, time, delayed * 3, f => {\r\n            this.openAniFunc();\r\n        });\r\n        let y1 = this.BtnStart.y;\r\n        lwg.Animation.move_Deform_Y(this.BtnStart, Laya.stage.height - 100, 15, y1, -0.15, 0.2, time, delayed * 1, f => { });\r\n        let y2 = this.AccordingLv.y;\r\n        lwg.Animation.move_Deform_Y(this.AccordingLv, -200, -15, y2, -0.15, 0.2, time, delayed * 1, f => { });\r\n    }\r\n    openAniFunc() {\r\n        this.btnClickOn();\r\n    }\r\n    noHaveSubChaoren() {\r\n        let allArray = [];\r\n        for (let i = 0; i < lwg.Global._allPifu.length; i++) {\r\n            const element = lwg.Global._allPifu[i];\r\n            allArray.push(element);\r\n        }\r\n        for (let j = 0; j < allArray.length; j++) {\r\n            let element1 = allArray[j];\r\n            for (let k = 0; k < lwg.Global._havePifu.length; k++) {\r\n                let element2 = lwg.Global._havePifu[k];\r\n                if (element1 === element2) {\r\n                    allArray.splice(j, 1);\r\n                    j--;\r\n                }\r\n            }\r\n        }\r\n        lwg.Global._notHavePifu = allArray;\r\n        for (let k = 0; k < allArray.length; k++) {\r\n            const element = allArray[k];\r\n            if (element === '09_chaoren') {\r\n                allArray.splice(k, 1);\r\n            }\r\n            lwg.Global._notHavePifuSubChaoren = allArray;\r\n        }\r\n    }\r\n    pifuXianding() {\r\n        if (lwg.Global._watchAdsNum >= 3) {\r\n            this.BtnXianding.visible = false;\r\n        }\r\n    }\r\n    goldRes() {\r\n        let goldLebel = this.GoldRes.getChildByName('Num');\r\n        goldLebel.text = (lwg.Global._goldNum).toString();\r\n    }\r\n    levelsDisplayFormat() {\r\n        let baseboard = this.AccordingLv.getChildByName('Baseboard');\r\n        let baseboard_shadow = this.AccordingLv.getChildByName('Baseboard_Shadow');\r\n        let box = this.AccordingLv.getChildByName('Box');\r\n        if (lwg.Global._gameLevel > 3) {\r\n            baseboard.skin = 'zhujiemian/baseboard_02.png';\r\n            baseboard_shadow.skin = 'zhujiemian/baseboard_shadow.png';\r\n            this.AccordingLv.x = 360;\r\n            box.x = 405;\r\n        }\r\n        else {\r\n            baseboard.skin = 'zhujiemian/baseboard_03.png';\r\n            baseboard_shadow.skin = 'zhujiemian/baseboard_shadow2.png';\r\n            this.AccordingLv.x = 423;\r\n            box.x = 282;\r\n        }\r\n        this.levelsAccording_4();\r\n    }\r\n    levelsAccording_4() {\r\n        let currentNum;\r\n        if (lwg.Global._gameLevel > 3) {\r\n            currentNum = (lwg.Global._gameLevel + 1) % 4;\r\n            if (currentNum === 0) {\r\n                currentNum = 4;\r\n            }\r\n        }\r\n        else {\r\n            currentNum = lwg.Global._gameLevel;\r\n        }\r\n        let cusNum = this.AccordingLv.getChildByName('CusNum');\r\n        let selectedBase = this.AccordingLv.getChildByName('SelectedBase');\r\n        for (let index = 0; index < cusNum.numChildren; index++) {\r\n            const cus = cusNum.getChildAt(index);\r\n            let base = selectedBase.getChildAt(index);\r\n            let num = Number(cus.name.substring(3, 4));\r\n            if (num === currentNum) {\r\n                cus.color = '#0d0d21';\r\n                cus.text = lwg.Global._gameLevel.toString();\r\n                if (lwg.Global._gameLevel === 3) {\r\n                    base.skin = 'zhujiemian/ui_customs_circle02.png';\r\n                }\r\n            }\r\n            else {\r\n                let diff = num - currentNum;\r\n                if (diff > 0) {\r\n                    cus.text = (lwg.Global._gameLevel + diff).toString();\r\n                    base.visible = false;\r\n                    cus.color = '#fff630';\r\n                }\r\n                else {\r\n                    cus.text = (lwg.Global._gameLevel + diff).toString();\r\n                    cus.color = '#0d0d21';\r\n                }\r\n            }\r\n        }\r\n    }\r\n    btnClickOn() {\r\n        lwg.Click.on('largen', null, this.BtnStart, this, null, null, this.btnStartClickUp, null);\r\n        lwg.Click.on('largen', null, this.BtnPifu, this, null, null, this.btnPifuClickUp, null);\r\n        lwg.Click.on('largen', null, this.BtnSet, this, null, null, this.btnSetClickUp, null);\r\n        lwg.Click.on('largen', null, this.BtnXianding, this, null, null, this.btnXiandingClickUp, null);\r\n    }\r\n    btnStartClickUp(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        if (lwg.Global.pingceV) {\r\n            lwg.Global._gameStart = true;\r\n            this.self.close();\r\n            return;\r\n        }\r\n        this.noHaveSubChaoren();\r\n        if (lwg.Global._notHavePifuSubChaoren.length === 0) {\r\n            lwg.Global._gameStart = true;\r\n        }\r\n        else {\r\n            lwg.Global._openInterface('UIPifuTry', this.self, null);\r\n        }\r\n        this.self.close();\r\n    }\r\n    btnSetClickUp(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        lwg.Global._openInterface('UISet', null, null);\r\n    }\r\n    btnPifuClickUp(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        lwg.Global._openInterface('UIPifu_01', null, null);\r\n    }\r\n    btnXiandingClickUp(event) {\r\n        event.currentTarget.scale(1, 1);\r\n        lwg.Global._openInterface('UIXDpifu', this.self, null);\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/SetBroom/Setbroom/src/script/Lwg_Template/lwg.ts"
  ]
}
