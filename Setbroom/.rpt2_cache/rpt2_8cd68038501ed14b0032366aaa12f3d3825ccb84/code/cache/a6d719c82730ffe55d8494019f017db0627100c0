{
  "code": "import { lwg } from \"../script/Lwg_Template/lwg\";\r\nexport default class RecordManager {\r\n    constructor() {\r\n        this.GRV = null;\r\n        this.isRecordVideoing = false;\r\n        this.isVideoRecord = false;\r\n        this.videoRecordTimer = 0;\r\n        this.isHasVideoRecord = false;\r\n    }\r\n    static Init() {\r\n        RecordManager.grv = new TJ.Platform.AppRt.DevKit.TT.GameRecorderVideo();\r\n    }\r\n    static startAutoRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (RecordManager.grv == null)\r\n            RecordManager.Init();\r\n        if (RecordManager.recording)\r\n            return;\r\n        RecordManager.autoRecording = true;\r\n        console.log(\"******************开始录屏\");\r\n        RecordManager._start();\r\n        RecordManager.lastRecordTime = Date.now();\r\n    }\r\n    static stopAutoRecord() {\r\n        this.timeNum = false;\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (!RecordManager.autoRecording) {\r\n            console.log(\"RecordManager.autoRecording\", RecordManager.autoRecording);\r\n            return false;\r\n        }\r\n        RecordManager.autoRecording = false;\r\n        RecordManager._end(false);\r\n        if (Date.now() - RecordManager.lastRecordTime > 6000) {\r\n            return true;\r\n        }\r\n        if (Date.now() - RecordManager.lastRecordTime < 3000) {\r\n            console.log(\"小于3秒\");\r\n            this.timeNum = true;\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    static startRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        if (RecordManager.autoRecording) {\r\n            this.stopAutoRecord();\r\n        }\r\n        RecordManager.recording = true;\r\n        RecordManager._start();\r\n        RecordManager.lastRecordTime = Date.now();\r\n    }\r\n    static stopRecord() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"time:\" + (Date.now() - RecordManager.lastRecordTime));\r\n        if (Date.now() - RecordManager.lastRecordTime <= 3000) {\r\n            return false;\r\n        }\r\n        RecordManager.recording = false;\r\n        RecordManager._end(true);\r\n        return true;\r\n    }\r\n    static _start() {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************180s  ？？？？？\");\r\n        RecordManager.grv.Start(180);\r\n    }\r\n    static _end(share) {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************180结束 ？？？？？\");\r\n        RecordManager.grv.Stop(share);\r\n    }\r\n    static _share(type, successedAc, completedAc = null, failAc = null) {\r\n        if (TJ.API.AppInfo.Channel() != TJ.Define.Channel.AppRt.ZJTD_AppRt)\r\n            return;\r\n        console.log(\"******************吊起分享 ？？？？？\", RecordManager.grv, RecordManager.grv.videoPath);\r\n        if (this.timeNum) {\r\n            lwg.Global._createHint_01(lwg.Enum.HintType.transcribeShort);\r\n            return;\r\n        }\r\n        if (RecordManager.grv.videoPath) {\r\n            let p = new TJ.Platform.AppRt.Extern.TT.ShareAppMessageParam();\r\n            p.extra.videoTopics = [\"师傅我坚持不住了\", \"回来吧刺激战场\", \"番茄小游戏\", \"抖音小游戏\"];\r\n            p.channel = \"video\";\r\n            p.success = () => {\r\n                lwg.Global._createHint_01(lwg.Enum.HintType.sharesuccess);\r\n                successedAc();\r\n            };\r\n            p.fail = () => {\r\n                if (type === 'noAward') {\r\n                    lwg.Global._createHint_01(lwg.Enum.HintType.sharefailNoAward);\r\n                }\r\n                else {\r\n                    lwg.Global._createHint_01(lwg.Enum.HintType.sharefail);\r\n                }\r\n                failAc();\r\n            };\r\n            RecordManager.grv.Share(p);\r\n        }\r\n        else {\r\n            lwg.Global._createHint_01(lwg.Enum.HintType.novideo);\r\n        }\r\n    }\r\n}\r\nRecordManager.recording = false;\r\nRecordManager.autoRecording = false;\r\nRecordManager.timeNum = false;\r\n",
  "references": [
    "D:/Game/project/SetBroom/obj/Setbroom/src/script/Lwg_Template/lwg.ts"
  ]
}
