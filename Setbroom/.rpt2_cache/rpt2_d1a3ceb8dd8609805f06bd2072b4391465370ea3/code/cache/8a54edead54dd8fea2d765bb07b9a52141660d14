{
  "code": "export default class Hand extends Laya.Script3D {\r\n    constructor() {\r\n        super();\r\n        this.compoundShape = new Laya.CompoundColliderShape();\r\n        this.connectSWicth = false;\r\n    }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.selfScene = this.self.scene;\r\n        this.besom = this.selfScene.getChildAt(6);\r\n        this.self['Hand'] = this;\r\n        this.rig = this.self.getComponent(Laya.Rigidbody3D);\r\n        this.transform = this.self.transform;\r\n        this.lowerLen = 0.3922;\r\n        this.combinatcollision();\r\n        this.handParameters();\r\n    }\r\n    combinatcollision() {\r\n        this.palm = this.self.getChildAt(0);\r\n        let palmCollider = this.palm.getComponent(Laya.PhysicsCollider);\r\n        let palmShape = palmCollider.colliderShape.clone();\r\n        palmCollider.destroy();\r\n        this.compoundShape.addChildShape(palmShape);\r\n        this.rig.colliderShape = this.compoundShape;\r\n    }\r\n    handParameters() {\r\n        this.rig.isKinematic = true;\r\n        this.rig.friction = 100;\r\n        this.rig.restitution = 0;\r\n        this.rig.gravity = (new Laya.Vector3(0, 0, 0));\r\n        this.rig.mass = 20000;\r\n    }\r\n    onCollisionEnter() {\r\n        this.connectSWicth = true;\r\n        this.besomFX = this.self.transform.localPositionX;\r\n        this.besomFY = this.self.transform.localPositionY;\r\n        this.distanceX = this.self.transform.localPositionX - this.besom.transform.localPositionX;\r\n        this.distanceY = this.self.transform.localPositionY - this.besom.transform.localPositionY;\r\n    }\r\n    bottomPosition() {\r\n        let l_01 = this.lowerLen;\r\n        let l_02 = Math.abs(this.besom.transform.localPositionY - this.self.transform.localPositionY);\r\n        let l_03;\r\n        if (Math.pow(l_01, 2) - Math.pow(l_02, 2) < 0) {\r\n            l_03 = 0;\r\n        }\r\n        else {\r\n            l_03 = Math.sqrt(Math.pow(l_01, 2) - Math.pow(l_02, 2));\r\n        }\r\n        let besomBottomX;\r\n        if (this.besom.transform.rotation.z > 0) {\r\n            besomBottomX = this.besom.transform.localPositionX + l_03;\r\n        }\r\n        else {\r\n            besomBottomX = this.besom.transform.localPositionX - l_03;\r\n        }\r\n        let offsetX = this.self.transform.localPositionX - besomBottomX;\r\n        return offsetX;\r\n    }\r\n    onCollisionExit() {\r\n    }\r\n    onUpdate() {\r\n        if (this.connectSWicth) {\r\n            let besomRig = this.besom['Besom'].rig;\r\n            let dX = this.self.transform.localPositionX - this.besom.transform.localPositionX;\r\n            let dY = this.self.transform.localPositionY - this.besom.transform.localPositionY;\r\n            if (Math.abs(this.distanceX - dX) > Math.abs(this.distanceX / 30) && Math.abs(this.distanceY - dY) > Math.abs(this.distanceY / 30)) {\r\n                this.connectSWicth = false;\r\n                besomRig.angularVelocity = new Laya.Vector3(0, 0, 0);\r\n                besomRig.gravity = new Laya.Vector3(0, -3, 0);\r\n            }\r\n            else {\r\n            }\r\n        }\r\n        let leftArm = this.selfScene['GameControl'].leftArm;\r\n        let x = this.self.transform.localPositionX;\r\n        let y = this.self.transform.localPositionY;\r\n        let z = this.self.transform.localScaleZ;\r\n        let v3 = new Laya.Vector3(x, y, z);\r\n        leftArm.transform.lookAt(v3, new Laya.Vector3(0, 1, 0));\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/SetBroom/Setbroom/src/script/GameControl.ts"
  ]
}
