{
  "code": "import { lwg } from \"../Lwg_Template/lwg\";\r\nexport default class UIMain_Besom extends Laya.Script3D {\r\n    constructor() {\r\n        super();\r\n        this.FPos = new Laya.Vector3();\r\n        this.downAccelerated = 0;\r\n    }\r\n    onEnable() {\r\n        this.self = this.owner;\r\n        this.self['UIMain_Besom'] = this;\r\n        this.selfScene = this.self.scene;\r\n        this.transform = this.self.transform;\r\n        this.firstPosX = this.transform.localPositionX;\r\n        this.firstPosY = this.transform.localPositionY;\r\n        this.firstPosZ = this.transform.localPositionZ;\r\n        this.firstRotZ = this.transform.localRotationEulerZ;\r\n        this.firstRotY = this.transform.localRotationEulerY;\r\n        this.firstRotX = this.transform.localRotationEulerX;\r\n        this.transform.localRotationEulerZ = 0;\r\n        this.FPos = this.self.transform.localPosition;\r\n    }\r\n    initProperty() {\r\n        this.self.transform.localPositionX = this.firstPosX;\r\n        this.self.transform.localPositionY = this.firstPosY;\r\n        this.self.transform.localPositionZ = this.firstPosZ;\r\n        let e = this.self.transform.localRotationEuler;\r\n        e.x = this.firstRotX;\r\n        e.y = this.firstRotY;\r\n        e.z = this.firstRotZ;\r\n        this.self.transform.localRotationEuler = e;\r\n        lwg.Global._besomMove = lwg.Enum.BesomMoveType.down;\r\n        lwg.Global._besomRotate = lwg.Enum.BesomMoveType.static;\r\n        this.downAccelerated = 0;\r\n        this.timeAdd = 0;\r\n        this.rotateAcc_01 = 0;\r\n        this.rotateAcc_02 = 0;\r\n        this.upAccelerated = 0;\r\n    }\r\n    rigParameters() {\r\n        this.selfRig.detectCollisions = true;\r\n        this.selfRig.friction = 100;\r\n        this.selfRig.restitution = 0.1;\r\n        this.selfRig.gravity = (new Laya.Vector3(0, 0, 0));\r\n        this.selfRig.angularVelocity = new Laya.Vector3(0, 0, 0);\r\n        this.selfRig.mass = 10;\r\n    }\r\n    onCollisionEnter(other) {\r\n        console.log(other);\r\n    }\r\n    move_Static() {\r\n        this.self.transform.position = this.FPos;\r\n    }\r\n    move_ConnectStatic() {\r\n        this.besomNormalFollow();\r\n    }\r\n    move_Up() {\r\n        if (this.upAccelerated < 0) {\r\n            lwg.Global._besomMove = lwg.Enum.BesomMoveType.down;\r\n        }\r\n        this.self.transform.localPositionY += this.upAccelerated;\r\n        this.upAccelerated -= 0.007;\r\n        this.rotateAcc_01 = 0;\r\n    }\r\n    move_Down() {\r\n        this.self.transform.localPositionY += this.downAccelerated;\r\n        this.downAccelerated -= 0.0003;\r\n    }\r\n    move_Left() {\r\n        this.besomNormalFollow();\r\n    }\r\n    move_Right() {\r\n        this.besomNormalFollow();\r\n    }\r\n    move_Right_Up() {\r\n    }\r\n    move_Right_Down() {\r\n    }\r\n    move_Left_Up() {\r\n    }\r\n    move_Left_Down() {\r\n    }\r\n    besomNormalFollow() {\r\n        this.targetHand = this.selfScene['UIMain'].targetHand;\r\n        if (this.targetHand) {\r\n            let position = this.targetHand.transform.position;\r\n            this.self.transform.position = position;\r\n        }\r\n    }\r\n    rotate_leftAndRight() {\r\n        if (lwg.Global._besomRotate === lwg.Enum.BesomRotateType.right) {\r\n            this.self.transform.localRotationEulerZ += this.rotateAcc_01;\r\n            this.timeAddControl();\r\n        }\r\n        else if (lwg.Global._besomRotate === lwg.Enum.BesomRotateType.left) {\r\n            this.self.transform.localRotationEulerZ += this.rotateAcc_01;\r\n            this.timeAddControl();\r\n        }\r\n        else if (lwg.Global._besomRotate === lwg.Enum.BesomRotateType.connectStatic) {\r\n            let rotate = this.self.transform.localRotationEulerZ;\r\n            if (rotate > 0) {\r\n                this.rotateAcc_02 += 0.01;\r\n            }\r\n            else if (rotate <= 0) {\r\n                this.rotateAcc_02 -= 0.01;\r\n            }\r\n            this.self.transform.localRotationEulerZ += this.rotateAcc_02;\r\n        }\r\n    }\r\n    timeAddControl() {\r\n        this.timeAdd++;\r\n        if (this.timeAdd > 0) {\r\n            lwg.Global._besomRotate = lwg.Enum.BesomRotateType.connectStatic;\r\n        }\r\n    }\r\n    activityRestrictions() {\r\n        let rote = this.transform.localRotationEuler;\r\n        rote.x = 0;\r\n        rote.y = 0;\r\n        this.transform.localRotationEuler = rote;\r\n        this.transform.localPositionZ = this.firstPosZ;\r\n    }\r\n    onUpdate() {\r\n        if (!lwg.Global._gameStart) {\r\n            return;\r\n        }\r\n        this.activityRestrictions();\r\n        switch (lwg.Global._besomMove) {\r\n            case lwg.Enum.BesomMoveType.static:\r\n                this.move_Static();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.connectStatic:\r\n                this.move_ConnectStatic();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.up:\r\n                this.move_Up();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.left:\r\n                this.move_Left();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.right:\r\n                this.move_Right();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.down:\r\n                this.move_Down();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.right_up:\r\n                this.move_Right_Up();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.right_down:\r\n                this.move_Right_Down();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.left_up:\r\n                this.move_Left_Up();\r\n                break;\r\n            case lwg.Enum.BesomMoveType.left_down:\r\n                this.move_Left_Up();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        this.rotate_leftAndRight();\r\n    }\r\n    onDisable() {\r\n    }\r\n}\r\n",
  "references": [
    "D:/Game/project/SetBroom/obj/Setbroom/src/script/Lwg_Template/lwg.ts"
  ]
}
